<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Two Word Random Password</title>
</head>

<body>
    <input type="file" onchange="readFile(this)">

    <script>
        // Task: read a file containing a list of words, randomly selects two of them, 
        // and concatenates them to produce a new password 
        // The total length of the password must is between 8 and 10 characters, 
        // and each word used must is at least three letters long. 

        // Function to capitalize the first letter of a word 
        function capitalizeFirstLetter(str) {
            return str.slice(0, 1).toUpperCase(0) + str.toLowerCase().slice(1);
        }

        // Function to generate a random number among the possible index of the elements of a word list
        function randomIndex(n) {
            // n = array.length 
            return Math.floor((Math.random() * n));
        }

        // File to import: "Prova4.txt"
        function readFile(input) {

            const file = input.files[0];

            const reader = new FileReader();

            // Reads the input file as a text
            reader.readAsText(file);

            reader.onload = function () {

                // Splits the string (this.result) into an array and filters words less than 3 in length 
                const list = this.result.split(", ").filter((word) => {
                    return word.length >= 3;
                })

                // Capitalizes the first letter of each word of the list
                const capWords = list.map((word) => {
                    return capitalizeFirstLetter(word);
                })

                let n = capWords.length;
                let password = "";

                // Selects and concatenates 2 random words from the list
                // until it finds a combination that has a length between 8 and 10
                while (true) {
                    password = capWords[randomIndex(n)] + capWords[randomIndex(n)];
                    console.log(password);
                    if (password.length >= 8 && password.length <= 10) break;

                } // end while loop

                // Displays the password	
                console.log("Valid Password: " + password);

            }; // end function "reader.onload"
        } // end function "readFile"

    </script>

</body>

</html>